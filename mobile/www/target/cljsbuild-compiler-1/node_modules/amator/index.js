goog.provide("module$Applications$server$dungeon_builder$node_modules$amator$index");
goog.provide("module$amator");
goog.provide("module$amator$index");
goog.require("module$Applications$server$dungeon_builder$node_modules$bezier_easing$src$index");
var module$Applications$server$dungeon_builder$node_modules$amator$index={};
module$Applications$server$dungeon_builder$node_modules$amator$index["default"]=function(source,target,options){var start=Object.create(null);var diff=Object.create(null);options=options||{};var easing=typeof options.easing==="function"?options.easing:animations$$module$Applications$server$dungeon_builder$node_modules$amator$index[options.easing];if(!easing){if(options.easing)console.warn("Unknown easing function in amator: "+options.easing);easing=animations$$module$Applications$server$dungeon_builder$node_modules$amator$index.ease}var step=
typeof options.step==="function"?options.step:noop$$module$Applications$server$dungeon_builder$node_modules$amator$index;var done=typeof options.done==="function"?options.done:noop$$module$Applications$server$dungeon_builder$node_modules$amator$index;var scheduler=getScheduler$$module$Applications$server$dungeon_builder$node_modules$amator$index(options.scheduler);var keys=Object.keys(target);keys.forEach(function(key){start[key]=source[key];diff[key]=target[key]-source[key]});var durationInMs=typeof options.duration===
"number"?options.duration:400;var durationInFrames=Math.max(1,durationInMs*.06);var previousAnimationId;var frame=0;previousAnimationId=scheduler.next(loop);return{cancel:cancel};function cancel(){scheduler.cancel(previousAnimationId);previousAnimationId=0}function loop(){var t=easing(frame/durationInFrames);frame+=1;setValues(t);if(frame<=durationInFrames){previousAnimationId=scheduler.next(loop);step(source)}else{previousAnimationId=0;setTimeout(function(){done(source)},0)}}function setValues(t){keys.forEach(function(key){source[key]=
diff[key]*t+start[key]})}};
module$Applications$server$dungeon_builder$node_modules$amator$index["default"].makeAggregateRaf=function(){var frontBuffer=new Set;var backBuffer=new Set;var frameToken=0;return{next:next,cancel:next,clearAll:clearAll};function clearAll(){frontBuffer.clear();backBuffer.clear();cancelAnimationFrame(frameToken);frameToken=0}function next(callback){backBuffer.add(callback);renderNextFrame()}function renderNextFrame(){if(!frameToken)frameToken=requestAnimationFrame(renderFrame)}function renderFrame(){frameToken=
0;var t=backBuffer;backBuffer=frontBuffer;frontBuffer=t;frontBuffer.forEach(function(callback){callback()});frontBuffer.clear()}function cancel(callback){backBuffer["delete"](callback)}};var BezierEasing$$module$Applications$server$dungeon_builder$node_modules$amator$index=module$Applications$server$dungeon_builder$node_modules$bezier_easing$src$index["default"];
var animations$$module$Applications$server$dungeon_builder$node_modules$amator$index={ease:(0,module$Applications$server$dungeon_builder$node_modules$bezier_easing$src$index["default"])(.25,.1,.25,1),easeIn:(0,module$Applications$server$dungeon_builder$node_modules$bezier_easing$src$index["default"])(.42,0,1,1),easeOut:(0,module$Applications$server$dungeon_builder$node_modules$bezier_easing$src$index["default"])(0,0,.58,1),easeInOut:(0,module$Applications$server$dungeon_builder$node_modules$bezier_easing$src$index["default"])(.42,
0,.58,1),linear:(0,module$Applications$server$dungeon_builder$node_modules$bezier_easing$src$index["default"])(0,0,1,1)};module$Applications$server$dungeon_builder$node_modules$amator$index["default"].sharedScheduler=(0,module$Applications$server$dungeon_builder$node_modules$amator$index["default"].makeAggregateRaf)();function noop$$module$Applications$server$dungeon_builder$node_modules$amator$index(){}
function getScheduler$$module$Applications$server$dungeon_builder$node_modules$amator$index(scheduler){if(!scheduler){var canRaf=typeof window!=="undefined"&&window.requestAnimationFrame;return canRaf?rafScheduler$$module$Applications$server$dungeon_builder$node_modules$amator$index():timeoutScheduler$$module$Applications$server$dungeon_builder$node_modules$amator$index()}if(typeof scheduler.next!=="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof scheduler.cancel!==
"function")throw new Error("Scheduler is supposed to have cancel(handle) function");return scheduler}function rafScheduler$$module$Applications$server$dungeon_builder$node_modules$amator$index(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function timeoutScheduler$$module$Applications$server$dungeon_builder$node_modules$amator$index(){return{next:function(cb){return setTimeout(cb,1E3/60)},cancel:function(id){return clearTimeout(id)}}}